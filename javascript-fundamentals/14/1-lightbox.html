<head>
    <title>Basic Lightbox - Third party library</title>
    
    <!-- Basic Lightbox CDN JS script & CSS stylesheet -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/basiclightbox@5.0.4/dist/basicLightbox.min.js" integrity="sha256-nMn34BfOxpKD0GwV5nZMwdS4e8SI8Ekz+G7dLeGE4XY=" crossorigin="anonymous"></script> -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/basiclightbox@5.0.4/dist/basicLightbox.min.css" integrity="sha256-r7Neol40GubQBzMKAJovEaXbl9FClnADCrIMPljlx3E=" crossorigin="anonymous"> -->
    
    <!-- Local static files for Basic Lightbox - downloaded -->
     <script src="./lightbox/script.js"></script>
     <link rel="stylesheet" href="./lightbox/style.css">
</head>

<!-- <style>
    .col {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 2rem;
    }

    .gallery {
        display: flex;
        gap: 2rem;
        align-items: center;
        flex-wrap: wrap;
    }

    .gallery img {
        width: 250px;
    }

    article {
        cursor: pointer;
        background-color: pink;
    }
</style> -->

<!-- <body class="col">
    <h1>Gallery</h1>
    <p>Come and see, wonders of our gallery!</p>

    <main id="gallery" class="gallery"></main>

    <template id="modal">
        <div>
            <img src="" alt="">
            <p></p>
            <button>Close</button>
        </div>
    </template>
</body> -->

<script id="Unclosable instance">

    // const unclosableInstance = basicLightbox.create(`
    //     <h1>Nie można zamknąć</h1>
    //     <p>Nie można zamknąć tego okna modalnego kliknięciem.</p>
    // `, {
    //     closable: false
    // });

    // unclosableInstance.show();

</script>

<script id="Markup">

    // const lightbox = basicLightbox.create(`<h1>Hello there</h1>`, {
    //     onShow: () => console.log("Opened"),
    //     onClose: () => console.log("Closed"),
    // });

    // const btn = document.createElement("button");
    // btn.textContent = "Show modal";

    // btn.addEventListener("click" , lightbox.show);

    // document.body.append(btn);

</script>

<script id="Gallery">

    // class Gallery {
    //     #currentImageIndex;
    //     #images;
    //     #galleryRoot;
    //     #modal;

    //     constructor({ images, galleryRoot, modalRoot }) {
    //         this.#images = images;
    //         this.#currentImageIndex = null;
            
    //         this.#createGallery(galleryRoot);
    //         this.#modal = this.#createModal(modalRoot);
    //         this.#mountModal(galleryRoot);
    //     }

    //     #getCurrentImage() {
    //         if (this.#currentImageIndex === null) return null;
    //         return this.#images[this.#currentImageIndex] ?? null;
    //     }

    //     #createGallery(galleryRoot) {
    //         const imgs = this.#images.map(this.#createImage);

    //         galleryRoot.append(...imgs);
    //     }

    //     #createImage({ description, preview, original }, id) {
    //         const container = document.createElement("article");
    //         container.id = id;
            
    //         const img = document.createElement("img");
    //         img.src = preview;
    //         img.alt = description;
            
    //         const p = document.createElement("p");
    //         p.textContent = description;

    //         container.appendChild(img);
    //         container.appendChild(p);
    //         return container;
    //     }

    //     #createModal(modalRoot) {
    //         const onShow = this.#renderModal.bind(this);
    //         return basicLightbox.create(modalRoot, { onShow });
    //     }

    //     #renderModal(lightbox) {
    //         const currentImage = this.#getCurrentImage();
    //         if (currentImage === null) return lightbox.close();
                                
    //         const modal = lightbox.element();
                
    //         const img = modal.querySelector("img");
    //         img.alt = currentImage.description;
    //         img.src = currentImage.original;

    //         modal.querySelector("p").textContent = currentImage.description;
    //         modal.querySelector("button").onclick = lightbox.close;
    //     }

    //     #mountModal(galleryRoot) {
    //         if (!this.#modal) return;
            
    //         galleryRoot.addEventListener("click", (event) => {
    //             if (event.target.tagName === "ARTICLE" || event.target.parentNode.tagName === "ARTICLE") {
    //                 this.#currentImageIndex = event.target.id || event.target.parentNode.id;
    //                 this.#modal.show();
    //             }
    //         });

    //         document.addEventListener("keydown", () => {
    //             this.#modal.close();
    //         });
    //     }
    // }

    // const images = [
    //     {
    //         description: "Hokkaido Flower",
    //         preview: "./images/orchids_480.jpg",
    //         original: "./images/orchids_1280.jpg",
    //     },
    //     {
    //         description: "Container Haulage Freight",
    //         preview: "./images/container_340.jpg",
    //         original: "./images/container_1280.jpg",
    //     },
    // ];

    // const gallery = new Gallery({
    //     images,
    //     galleryRoot: document.querySelector("main#gallery"),
    //     modalRoot: document.querySelector("template#modal"),
    // });

</script>


<style>

    body {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    ul {
        margin:0;
        padding: 0;
        list-style-type: none;

        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        max-width: calc(3 * 360px + 40px);
    }

    li {
        list-style-type: none;
    }

    .gallery-image {
        width: 360px;
        height: 200px;
    }
    
</style>

<body>
    <ul class="gallery"></ul>
</body>

<script id="Image data">
    const images = [
        {
            preview:
            'https://cdn.pixabay.com/photo/2019/05/14/16/43/rchids-4202820__480.jpg',
            original:
            'https://cdn.pixabay.com/photo/2019/05/14/16/43/rchids-4202820_1280.jpg',
            description: 'Hokkaido Flower',
        },
        {
            preview:
            'https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677__340.jpg',
            original:
            'https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677_1280.jpg',
            description: 'Container Haulage Freight',
        },
        {
            preview:
            'https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785__340.jpg',
            original:
            'https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785_1280.jpg',
            description: 'Aerial Beach View',
        },
        {
            preview:
            'https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619__340.jpg',
            original:
            'https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619_1280.jpg',
            description: 'Flower Blooms',
        },
        {
            preview:
            'https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334__340.jpg',
            original:
            'https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334_1280.jpg',
            description: 'Alpine Mountains',
        },
        {
            preview:
            'https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571__340.jpg',
            original:
            'https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571_1280.jpg',
            description: 'Mountain Lake Sailing',
        },
        {
            preview:
            'https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272__340.jpg',
            original:
            'https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272_1280.jpg',
            description: 'Alpine Spring Meadows',
        },
        {
            preview:
            'https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255__340.jpg',
            original:
            'https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255_1280.jpg',
            description: 'Nature Landscape',
        },
        {
            preview:
            'https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843__340.jpg',
            original:
            'https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843_1280.jpg',
            description: 'Lighthouse Coast Sea',
        },
    ];
</script>

<script id="Simple Lightbox gallery">

    const el = (tag, props) => Object.assign(document.createElement(tag), props);

    const createModal = ({ original, description }) =>
        `<img class="${"lightbox-gallery-image"}" src="${original}" alt="${description}"/>`

    const createGalleryItem = ({ preview, original, description }) => {
        const li = el("li", { className: "gallery-item" });
        
        const a = el("a", { className: "gallery-link", href: original });
        
        const img = el("img", { className: "gallery-image", src: preview, alt: description });
        img.dataset["source"] = original;


        const lightbox = basicLightbox.create(createModal({ original, description }));

        a.addEventListener("click", (event) => {
            event.preventDefault();
            lightbox.show();
        });


        a.append(img);
        li.append(a);
        return li;
    };


    const galleryItems = images.map(createGalleryItem);
    const gallery = document.querySelector("ul.gallery");

    gallery.append(...galleryItems);

</script>